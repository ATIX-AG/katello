
= javascript do
  :plain
    localize({
      "edit_environment": '#{escape_javascript(_('Edit Environment'))}'
    });

:ruby
  sockets_help = _("Number of Sockets")


- if @environment
  = content_for :title do
    #{_("New system")}
    = content_for :content do
      = kt_form_for(System.new, :action => "create", :id => "new_system") do |f|
        = hidden_field_tag 'system[environment_id]', @environment.id
        .grid_8#new_system
          = f.text_field :name, :label => _("Name of Your System:")

          = f.field :arch, :label => _("Architecture:") do
            = architecture_select

          = f.text_field :sockets, :label => _("Number of Sockets or LPARs:"), :help => sockets_help

          = f.field :virtual, :label => _("System Type:") do
            = virtual_buttons

          = f.field :environment, :label => envsys ? _("Environment:") : _("Choose Environment:") do
            - if envsys
              = @environment.name
            - else
              = environment_selector(:path_widget_class => "grid_5", :path_entries_class => "grid_5", :library_clickable => false, :accessible_envs => accessible_envs, :url_products_proc => url_products_proc)

          = f.submit _("Save")
- else
  = content_for :title do
    #{_("New system")}
    = content_for :content do
      #{_("You need to create an environment for this org before you can create a system.")}
